<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>lesson4</title>
</head>
<body>
<div style="width: 50%">
    <div style="padding: 15px; margin: 10px; border: 1px solid black">
        Написать функцию, преобразующую число в объект. Передавая на вход число от 0 до 999, <br>
        мы должны получить на выходе объект, в котором в соответствующих свойствах описаны единицы, <br>
        десятки и сотни. Например, для числа 245 мы должны получить следующий объект: <br>
        {‘единицы’: 5, ‘десятки’: 4, ‘сотни’: 2}. Если число превышает 999, необходимо выдать соответствующее <br>
        сообщение с помощью console.log и вернуть пустой объект. <br>
        *Смотреть в консоль <input type="button" onclick="part1()" value="Поехали">
    </div>
    <div style="padding: 15px; margin: 10px; border: 1px solid black">
        Для игры, реализованной на уроке, добавить возможность вывода хода номер n (номер задается пользователем) <br>
        *Смотреть в консоль <input type="button" onclick="part2()" value="Поехали">
    </div>
</div>
</body>
</html>

<script type="text/javascript">

    function part1() {
        let num = Number(prompt('Введите число'));
        if (isNaN(num)){
            alert('Вы ввели не число');
            return;
        };

        let munToObj = function (num) {
            if (num > 999) {
                console.log('Число больше 999');
                return {};
            }
            num = num.toString();
            return {'единицы': num[0], 'десятки': num[1], 'сотни': num[2]};
        };

        console.log(munToObj(num));
    }
    function part2() {
    /**************GOALKEEPER****************
        -------------------------------------
        |  topleft   |  top   |  topright   |
        --------------------------
        |    left    | center |   right     |
        --------------------------
        | bottomleft | bottom | bottomright |
        --------------------------------------
        */

        const sectors = [
            'topleft',
            'top',
            'topright',
            'left',
            'center',
            'right',
            'bottomleft',
            'bottom',
            'bottomright',
        ];

        const goalKeeper = {
            defendSector: null,
            savesToWin: 2,
            saves: 0,
            init() {
                console.log('HERE');
                const sectorNum = Math.trunc(Math.random() * 9);
                this.defendSector = sectors[sectorNum];
                console.log(this.defendSector);
            },
            checkWin() {
                if (this.saves === this.savesToWin) {
                    console.log('Goalkeeper wins!!!');
                    return true;
                }
                console.log('Goalkeeper need ' + (this.savesToWin - this.saves) + ' more saves');
                return false;
            },
        };

        const attacker = {
            sectorToAttack: null,
            goals: 0,
            goalsToWin: 10,
            init(sector) {
                if (sectors.indexOf(sector) >= 0) {
                    this.sectorToAttack = sector;
                    return true;
                }
                return false;
            },
            attack(keeper) {
                console.log(keeper.defendSector, this.sectorToAttack);
                if (keeper.defendSector === this.sectorToAttack) {
                    console.log('SAVE!!!');
                    keeper.saves++;
                    return false;
                }
                console.log('GOAL!!!');
                this.goals++;
                return true;
            },
            checkWin() {
                if (this.goals === this.goalsToWin) {
                    console.log('Attacker wins!!!');
                    return true;
                }
                console.log('Attacker need ' + (this.goalsToWin - this.goals) + ' more goals');
                return false;
            },
        };

        let keeperWins = false;
        let attackerWins = false;
        let countStep = 0;

        do {
            let currentAttacksector;
            do {
                currentAttacksector = prompt('Choose sector to attack ( ' + sectors.join(', ') + ' )');
                countStep++;
            } while (!attacker.init(currentAttacksector));

            goalKeeper.init();
            attacker.attack(goalKeeper);

            keeperWins = goalKeeper.checkWin();
            attackerWins = attacker.checkWin();
        } while (!keeperWins && !attackerWins);
        console.log('Победил за ' + countStep + ' шагов');
    }
</script>